(()=>{"use strict";var e,t={6359:(e,t,n)=>{const a=window.wp.blocks;var r=n(1609),i=n(4550);const o=window.wp.data,s=window.wp.coreData,c=window.wp.element;var l=n(876),m=n(1486),d=n(255);function u(e){e.preventDefault()}var p=n(7438),g=n(3643);function h(e,t={}){const n={stripTags:!0,...t},{stripTags:a}=n;return(0,g.pipe)(e.title.rendered,a?e=>(0,p.QZ)(e).result:e=>e)}var f=n(1239);function y({event:e,isOnEditor:t}){const n=(0,m.qg)(e.acf.event_date,"yyyy-MM-dd HH:mm:ss",new Date),a=e.link,i=(0,r.useMemo)((()=>()=>(0,r.createElement)(d.A,{containerClassName:"event-summary__date t-center event-summary__date--loading",circle:!0,height:"100%",width:"100%"})),[e.isPlaceholder]),o=(0,r.useMemo)((()=>()=>(0,r.createElement)(d.A,{count:.5})),[e.isPlaceholder]),s=(0,r.useMemo)((()=>()=>(0,r.createElement)("p",null,(0,r.createElement)(d.A,{count:3}))),[e.isPlaceholder]),c=(0,r.useMemo)((()=>e=>(0,r.createElement)("a",{href:a,onClick:t?u:void 0,...e},e.children)),[a,t]);return(0,r.createElement)("div",{className:"event-summary"},e.isPlaceholder?(0,r.createElement)(i,null):(0,r.createElement)(c,{className:"event-summary__date t-center"},(0,r.createElement)("span",{className:"event-summary__month"},(0,l.GP)(n,"MMM")),(0,r.createElement)("span",{className:"event-summary__day"},(0,l.GP)(n,"dd"))),(0,r.createElement)("div",{className:"event-summary__content"},(0,r.createElement)("h5",{className:"event-summary__title headline headline--tiny"},e.isPlaceholder?(0,r.createElement)(o,null):(0,r.createElement)(c,null,h(e))),e.isPlaceholder?(0,r.createElement)(s,null):(0,r.createElement)("p",null,function(e,t={}){const n={stripTags:!0,trimWords:30,...t},{stripTags:a,trimWords:r}=n,i=e.excerpt&&e.excerpt.rendered?e.excerpt.rendered:e.content.rendered;return(0,g.pipe)(i,a?e=>(0,p.QZ)(e).result:e=>e,(e=>function(e,t,n="..."){const a=f.A.words(e.trim(),/[^\s]+/g);return t>a.length?e:a.slice(0,t).join(" ").concat(n)}(e,r,"...")))}(e,{trimWords:20})+" ",(0,r.createElement)(c,{className:"nu gray"},"Learn more"))))}function v(e){return(0,r.createElement)("a",{onClick:u,...e})}const E=(0,r.forwardRef)((function({campus:e,withLink:t=!0},n){const{acf:{map_location:a}}=e,o=(0,r.useRef)(null),[s,c]=(0,r.useState)(!1);return(0,r.useImperativeHandle)(n,(()=>o.current),[]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.J8,{position:new google.maps.LatLng(a.lat,a.lng),ref:o,clickable:!0,onClick:function(){c(!0)}},(0,r.createElement)(i.yU,null)),s?(0,r.createElement)(i.Fu,{anchor:o.current,onClose:function(){c(!1)}},(0,r.createElement)("h3",null,t?(0,r.createElement)(v,{href:e.link},h(e)):h(e)),a.address):"")}));function _({campuses:e,isSingle:t}){const n=(0,i.ko)(),a=e.reduce(((e,t)=>{const{acf:{map_location:n}}=t;return e+n.lat+n.lng}),"");return(0,r.useEffect)((()=>{if(!n||0===e.length)return;const t=new google.maps.LatLngBounds;if(e.forEach((({acf:{map_location:e}})=>{const n=new google.maps.LatLng(e.lat,e.lng);t.extend(n)})),1===e.length)return n.setCenter(t.getCenter()),void n.setZoom(4);n.fitBounds(t)}),[n,a]),(0,r.createElement)(r.Fragment,null,(e||[]).map((e=>(0,r.createElement)(E,{campus:e,key:e.id,withLink:!t}))))}const w=(0,r.memo)((function(e){return(0,r.createElement)(i.T5,{mapId:"CAMPUS_MAP_ID",className:"acf-map",mapTypeId:google.maps.MapTypeId.ROADMAP,defaultZoom:0,defaultCenter:{lat:0,lng:0}},(0,r.createElement)(_,{...e}))}),((e,t)=>{const{campuses:n}=e,{campuses:a}=t;function r(e,t){const{acf:{map_location:n}}=t;return e+t.id+n.lat+n.lng+n.address}return n.reduce(r,"")===a.reduce(r,"")})),b=window.wp.blockEditor,N=window.wp.components;var P=n(6005);function k({styles:e,...t}){return(0,r.createElement)(P.Ay,{isSearchable:!0,styles:{container:(t,n)=>({...t,flex:1,...e?.container?.(t,n)}),input:(t,n)=>({...t,"input:focus":{boxShadow:"none"},...e?.input?.(t,n)}),...e},...t})}function C({campusInfoPreview:e,setCampusInfoPreview:t}){const n=(0,o.useSelect)((e=>e(s.store).getEntityRecords("postType","campus",{per_page:-1})),[]),a=n?.map((e=>({label:h(e),value:e.id,title:e.title,content:e.content.rendered,id:e.id,link:e.link,acf:e.acf})));return(0,r.createElement)(b.InspectorControls,{group:"settings"},(0,r.createElement)(N.PanelBody,{title:"Campus Preview",initialOpen:!0},(0,r.createElement)(N.PanelRow,null,(0,r.createElement)(k,{name:"campus",isLoading:!n,value:e,onChange:function(e){t(e||void 0)},options:a}))))}class D{static DomainName="cetacean-university-theme";static Banner=`${this.DomainName}/banner`;static Heading=`${this.DomainName}/heading`;static Button=`${this.DomainName}/button`;static EventsAndPosts=`${this.DomainName}/events-and-posts`;static Header=`${this.DomainName}/header`;static Footer=`${this.DomainName}/footer`;static Menu=`${this.DomainName}/menu`;static Slider=`${this.DomainName}/slider`;static Slide=`${this.DomainName}/slide`;static PageBannerTitle=`${this.DomainName}/page-banner-title`;static PageBannerSubtitle=`${this.DomainName}/page-banner-subtitle`;static PageBannerGeneric=`${this.DomainName}/page-banner-generic`;static PostContent=`${this.DomainName}/post-content`;static PageContent=`${this.DomainName}/page-content`;static CampusContent=`${this.DomainName}/campus-content`;static EventContent=`${this.DomainName}/event-content`;static ProgramContent=`${this.DomainName}/program-content`;static ProfessorContent=`${this.DomainName}/professor-content`;static BlogPosts=`${this.DomainName}/blog-posts`;static UpcomingEvents=`${this.DomainName}/upcoming-events`;static PastEvents=`${this.DomainName}/past-events`;static AllPrograms=`${this.DomainName}/all-programs`;static CampusesMap=`${this.DomainName}/campuses-map`;static NoteManager=`${this.DomainName}/note-manager`;static SearchForm=`${this.DomainName}/search-form`;static SearchResults=`${this.DomainName}/search-results`;static BlockCategory="cetacean-university"}(0,a.registerBlockType)(D.CampusContent,{title:"Campus Content",category:D.BlockCategory,icon:"location",attributes:{},edit:function(e){const{attributes:t,setAttributes:n}=e,a=new Date,m={id:0,title:{rendered:"{Campus Title}"},link:"/",content:"{Campus Content}",acf:{map_location:{address:"{Address}",lat:0,lng:0,zoom:10,place_id:"{id}"}},relatedPrograms:[{id:0,title:{rendered:"{Program Title}"},link:"/"}],relatedEvents:[{id:0,title:{rendered:"{Event Title}"},link:"/",content:{rendered:"{Event Content}",protected:!1},excerpt:{rendered:"{Event Excerpt}",protected:!1},acf:{event_date:(0,l.GP)(a,"yyyy-MM-dd HH:mm:ss"),related_programs:[]}}]},[d,u]=(0,r.useState)(),p=(0,o.useSelect)((e=>d?e(s.store).getEntityRecords("postType","program",{per_page:-1,orderby:"title",order:"asc",meta_query_key:"related_campus",meta_query_compare:"LIKE",meta_query_value:`"${d.id}"`}):null),[d?.id]),g=(0,o.useSelect)((e=>d?e(s.store).getEntityRecords("postType","event",{per_page:-1,orderby:"meta_value",order:"asc",meta_key:"event_date",meta_query_key:"related_campus",meta_query_compare:"LIKE",meta_query_value:`"${d.id}"`,meta_query_key_2:"event_date",meta_query_value_2:(0,l.GP)(a,"yyyyMMddHHmmss"),meta_query_compare_2:">=",meta_query_type_2:"DATE"}):null),[d?.id]),f={...m,...d,relatedPrograms:p?.map((e=>({id:e.id,title:e.title,link:e.link})))||m.relatedPrograms,relatedEvents:g?.map((e=>({id:e.id,title:e.title,link:e.link,content:e.content,excerpt:e.excerpt,acf:e.acf})))||m.relatedEvents},{relatedPrograms:E,relatedEvents:_}=f;return(0,r.createElement)(i.c4,{apiKey:"AIzaSyAgrW0x_IwZHjQ2bMJFmE8IrGClTgFX6qE",onLoad:()=>console.log("Google Maps API Loaded")},(0,r.createElement)(C,{campusInfoPreview:d,setCampusInfoPreview:u}),(0,r.createElement)("div",{className:"container container--narrow page-section"},(0,r.createElement)(c.RawHTML,{className:"generic-content"},f.content),(0,r.createElement)(w,{campuses:[f],isSingle:!0}),E&&0!==E.length?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("hr",{className:"section-break"}),(0,r.createElement)("h2",{className:"headline headline--medium"},"Offered Programs"),(0,r.createElement)("ul",{className:"link-list min-list"},E.map((e=>(0,r.createElement)("li",{key:e.id},(0,r.createElement)(v,{href:e.link},h(e))))))):"",_&&0!==_.length?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("hr",{className:"section-break"}),(0,r.createElement)("h2",{className:"headline headline--medium"},"Upcoming Events on the Campus"),_.map((e=>(0,r.createElement)(y,{key:e.id,event:e,isOnEditor:!0})))):""))}})},1609:e=>{e.exports=window.React},5795:e=>{e.exports=window.ReactDOM},6087:e=>{e.exports=window.lodash}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(m=0;m<e.length;m++){for(var[n,r,i]=e[m],s=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(m--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=215,(()=>{var e={215:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,s,c]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var m=c(a)}for(t&&t(n);l<o.length;l++)i=o[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},n=globalThis.webpackChunkcetacean_university_block_theme=globalThis.webpackChunkcetacean_university_block_theme||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[96],(()=>a(6359)));r=a.O(r)})();