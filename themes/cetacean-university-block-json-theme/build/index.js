(()=>{"use strict";var e,t={3492:(e,t,a)=>{a(3678);var n=a(6777);const s=window.jQuery;var r=a.n(s),o=a(7438),i=a(3643);new class{constructor(){this.menu=document.querySelector(".site-header__menu"),this.openButton=document.querySelector(".site-header__menu-trigger"),this.events()}events(){this.openButton?.addEventListener("click",(()=>this.openMenu()))}openMenu(){this.openButton?.classList.toggle("site-header__menu-trigger--open"),this.openButton?.classList.toggle("site-header__menu-trigger--closed"),this.menu?.classList.toggle("site-header__menu--active")}},new class{constructor(){const e=document.querySelectorAll(".hero-slider");e&&e.forEach((e=>{this.initGlide(e)}))}initGlide(e){const t=e.querySelectorAll(".hero-slider__slide"),a=Array.from(t).reduce(((e,t,a)=>e+`<button class="slider__bullet glide__bullet" data-glide-dir="=${a}"></button>`),""),s=e.querySelector(".glide__bullets");s&&s.insertAdjacentHTML("beforeend",a),new n.A(e,{type:"carousel",perView:1,autoplay:3e3}).mount()}},new class{constructor(){document.querySelectorAll(".acf-map").forEach((e=>{this.new_map(e)}))}new_map(e){var t=e.querySelectorAll(".marker"),a={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP,mapId:"CAMPUS_MAP_ID"},n=new google.maps.Map(e,a);n.markers=[];var s=this;t.forEach((function(e){s.add_marker(e,n)})),this.center_map(n)}add_marker(e,t){var a=new google.maps.LatLng(Number(e.getAttribute("data-lat")),Number(e.getAttribute("data-lng"))),n=new google.maps.Marker({position:a,map:t});if(t.markers?.push(n),e.innerHTML){var s=new google.maps.InfoWindow({content:e.innerHTML});google.maps.event.addListener(n,"click",(function(){s.open(t,n)}))}}center_map(e){var t=new google.maps.LatLngBounds;e.markers?.forEach((function(e){var a=new google.maps.LatLng(e.position.lat(),e.position.lng());t.extend(a)})),1==e.markers?.length?(e.setCenter(t.getCenter()),e.setZoom(4)):e.fitBounds(t)}},new class{constructor(){this.setupSearchOverlay(),this.openSearchTrigger=r()(".js-search-trigger"),this.closeSearchTrigger=r()(".search-overlay__close"),this.inputSearch=r()("#search-term"),this.searchOverlay=r()(".search-overlay"),this.searchResults=r()("#search-overlay__results"),this.isSearchOverlayOpen=!1,this.isShowingLoadingSpinner=!1,this.searchTimeout,this.setupEvents()}setupEvents(){this.openSearchTrigger.on("click",this.openSearchOverlay.bind(this)),this.closeSearchTrigger.on("click",this.closeSearchOverlay.bind(this)),r()(document).on("keydown",this.onOpenSearchKeyReleased.bind(this)),r()(document).on("keydown",this.onCloseSearchKeyReleased.bind(this)),this.inputSearch.on("input",this.onSearchInput.bind(this))}setupSearchOverlay(){const e=r()("<div>").addClass("container").append(r()("<i>").addClass("fa fa-search search-overlay__icon").attr("aria-hidden","true"),r()("<input>").attr("type","text").addClass("search-term").attr("placeholder","Type here to search across the site!").attr("aria-label","Type here to search across the site!").attr("id","search-term"),r()("<i>").addClass("fa fa-window-close search-overlay__close").attr("aria-hidden","true")),t=r()("<div>").addClass("container").append(r()("<div>").attr("id","search-overlay__results")),a=r()("<div>").addClass("search-overlay").append(r()("<div>").addClass("search-overlay__top").append(e),t);r()("body").append(a)}openSearchOverlay(e){e&&e.preventDefault(),this.inputSearch.val(""),this.searchOverlay.addClass("search-overlay--active"),this.searchOverlay.one("transitionend",(()=>{this.inputSearch.trigger("focus")})),r()("body").addClass("body-no-scroll"),this.isSearchOverlayOpen=!0}closeSearchOverlay(){this.searchOverlay.removeClass("search-overlay--active"),r()("body").removeClass("body-no-scroll"),this.isSearchOverlayOpen=!1}onOpenSearchKeyReleased(e){"s"!==e.key||r()("input, textarea").is(":focus")||this.isSearchOverlayOpen||(this.openSearchOverlay(),console.log("Open"))}onCloseSearchKeyReleased(e){"Escape"===e.key&&this.isSearchOverlayOpen&&(this.closeSearchOverlay(),console.log("Close"))}onSearchInput(e){clearTimeout(this.searchTimeout),this.showLoadingSpinner(),e.target.value?this.searchTimeout=window.setTimeout((()=>this.getSearchResults(e)),500):this.hideLoadingSpinner("")}async getSearchResults(e){try{const{root_url:t}=cetaceanUniversityData,a=await r().getJSON(`${t}/wp-json/cetacean_university/v1/search?term=${e.target.value}`),n=r()("<p>").text("No Results Found for the search."),s=r()("<div>").addClass("row"),o=r()("<div>").appendTo(s).addClass("one-third"),i=r()("<h2>").appendTo(o).addClass("search-overlay__section-title").text("Pages and Posts"),d=r()("<ul>").addClass("link-list min-list");a.postAndPage.forEach((e=>{const t=r()("<li>").appendTo(d),a=r()("<a>").appendTo(t).attr("href",e.permalink).text(e.title);r()("<div>").appendTo(t).addClass("generic-content").html(e.excerpt),"post"===e.type&&r()("<p>").insertAfter(a).text(`By ${e.authorName}`)})),0===a.postAndPage.length&&n.clone().insertAfter(i),a.postAndPage.length>0&&d.insertAfter(i);const l=r()("<div>").appendTo(s).addClass("one-third"),c=r()("<h2>").appendTo(l).addClass("search-overlay__section-title").text("Programs"),p=r()("<ul>").addClass("link-list min-list");a.program.forEach((e=>{const t=r()("<li>").appendTo(p);r()("<a>").appendTo(t).attr("href",e.permalink).text(e.title),r()("<div>").appendTo(t).addClass("generic-content").html(e.excerpt)})),0===a.program.length&&n.clone().insertAfter(c),a.program.length>0&&p.insertAfter(c);const h=r()("<h2>").appendTo(l).addClass("search-overlay__section-title").text("Professors"),u=r()("<ul>").addClass("professor-cards");a.professor.forEach((e=>{const t=r()("<li>").appendTo(u).addClass("professor-card__list-item"),a=r()("<a>").appendTo(t).addClass("professor-card").attr("href",e.permalink);r()("<img>").appendTo(a).addClass("professor-card__image").attr("src",e.imageSrc).attr("alt",`Image of Professor ${e.title}`),r()("<span>").appendTo(a).addClass("professor-card__name").text(e.title)})),0===a.professor.length&&n.clone().insertAfter(h),a.professor.length>0&&u.insertAfter(h);const g=r()("<div>").appendTo(s).addClass("one-third"),v=r()("<h2>").appendTo(g).addClass("search-overlay__section-title").text("Campuses"),m=r()("<ul>").addClass("link-list min-list");a.campus.forEach((e=>{const t=r()("<li>").appendTo(m),a=(r()("<a>").appendTo(t).attr("href",e.permalink).text(e.title),r()("<div>").appendTo(t).addClass("generic-content"));e.excerpt&&a.html(e.excerpt)})),0===a.campus.length&&n.clone().insertAfter(v),a.campus.length>0&&m.insertAfter(v);const y=r()("<h2>").appendTo(g).addClass("search-overlay__section-title").text("Events"),f=r()("<div>");a.event.forEach((e=>{const t=r()("<div>").appendTo(f).addClass("event-summary").text(e.title),a=r()("<a>").appendTo(t).addClass("event-summary__date t-center").attr("href",e.permalink),n=(r()("<span>").appendTo(a).addClass("event-summary__month").text(e.month),r()("<span>").appendTo(a).addClass("event-summary__day").text(e.day),r()("<div>").appendTo(t).addClass("event-summary__content")),s=r()("<h5>").appendTo(n).addClass("event-summary__title headline headline--tiny"),o=(r()("<a>").appendTo(s).attr("href",e.permalink).text(e.title),r()("<p>").appendTo(n).text(`${e.excerpt} `));r()("<a>").appendTo(o).addClass("nu gray").attr("href",e.permalink).text("Learn More")})),0===a.event.length&&n.clone().insertAfter(y),a.event.length>0&&f.children().insertAfter(y),this.hideLoadingSpinner(s.prop("outerHTML"))}catch(e){const t=r()("<p>").text("An unexpected error has occurred. Please try again later.");this.hideLoadingSpinner(t.html())}}showLoadingSpinner(){this.isShowingLoadingSpinner||(this.searchResults.html('<div class="spinner-loader"></div>'),this.isShowingLoadingSpinner=!0)}hideLoadingSpinner(e=""){this.isShowingLoadingSpinner&&(this.searchResults.html(e),this.isShowingLoadingSpinner=!1)}},new class{constructor(){this.setupEvents()}setupEvents(){r()("#my-notes-list").on("click",".btn--delete-note",this.deleteNote.bind(this)),r()("#my-notes-list").on("click",".btn--edit-note",this.editNote.bind(this)),r()("#my-notes-list").on("click",".btn--cancel-edit",this.cancelEdit.bind(this)),r()("#my-notes-list").on("click",".btn--update-note",this.updateNote.bind(this)),r()(".submit-note").on("click",this.createNote.bind(this))}async deleteNote(e){try{const t=r()(e.currentTarget).parents(".note-item"),a=Number(t.data("note-id")),n=await r().ajax({url:`${cetaceanUniversityData.root_url}/wp-json/wp/v2/note/${a}`,type:"DELETE",headers:{"X-WP-Nonce":cetaceanUniversityData.nonce}});if(n.id!==a)return void alert("Something went wrong");t.slideUp({complete:()=>t.remove()}),n.hasReachedLimit||r()(".note-error-message").removeClass("active").empty()}catch(e){if(!("readyState"in e))return void console.log(e);const t=e.responseJSON;alert(t.message)}}editNote(e){try{const t=r()(e.currentTarget).parents(".note-item");this.makeFieldsEditable(t)}catch(e){if(!("readyState"in e))return void console.log(e);const t=e.responseJSON;alert(t.message)}}cancelEdit(e){const t=r()(e.currentTarget).parents(".note-item");this.makeFieldsReadonly(t)}async updateNote(e){try{const t=r()(e.currentTarget).parents(".note-item"),a=Number(t.data("note-id"));if((await r().ajax({url:`${cetaceanUniversityData.root_url}/wp-json/wp/v2/note/${a}`,type:"POST",headers:{"X-WP-Nonce":cetaceanUniversityData.nonce},data:{title:t.find(".note-title-field").val(),content:t.find(".note-body-field").val()}})).id!==a)return void alert("Something went wrong");this.makeFieldsReadonly(t)}catch(e){if(!("readyState"in e))return void console.log(e);const t=e.responseJSON;alert(t.message)}}async createNote(){try{const e=r()(".new-note-title"),t=r()(".new-note-body"),a=await r().ajax({url:`${cetaceanUniversityData.root_url}/wp-json/wp/v2/note`,type:"POST",headers:{"X-WP-Nonce":cetaceanUniversityData.nonce},data:{title:e.val(),content:t.val(),status:"publish"}});r()(".note-error-message").removeClass("active").empty();const n=r()("#my-notes-list");e.val(""),t.val("");const s=r()("<i>").addClass("fa").attr("aria-hidden","true"),d=r()("<li>").prependTo(n).addClass("note-item").attr("data-note-id",a.id),l=(r()("<input>").appendTo(d).addClass("note-title-field").val(function(e,t={}){const a={stripTags:!0,...t},{stripTags:n}=a;return(0,i.pipe)(e.title.rendered,n?e=>(0,o.QZ)(e).result:e=>e)}(a)).attr("readonly","true"),r()("<div>").appendTo(d).addClass("note-actions"));r()("<button>").appendTo(l).addClass("btn").addClass("btn--cancel-edit").addClass("btn--cancel-edit--hidden").attr("aria-hidden","true").append(s.clone().addClass("fa-times")).append(" Cancel "),r()("<button>").appendTo(l).addClass("btn").addClass("btn--edit-note").append(s.clone().addClass("fa-pencil")).append(" Edit "),r()("<button>").appendTo(l).addClass("btn").addClass("btn--delete-note").append(s.clone().addClass("fa-trash-o")).append(" Delete "),r()("<textarea>").appendTo(d).addClass("note-body-field").attr("readonly","true").text(function(e,t={}){const a={stripTags:!0,...t},{stripTags:n}=a;return(0,i.pipe)(e.content.rendered,n?e=>(0,o.QZ)(e).result:e=>e)}(a)),r()("<button>").appendTo(d).addClass("btn").addClass("btn--update-note").addClass("btn--primary").addClass("btn--slide-from-top").append(s.clone().addClass("fa-arrow-right")).append(" Save ")}catch(e){if(!("readyState"in e))return void console.log(e);const t=e.responseJSON;if("note_limit_error"===t.code)return void r()(".note-error-message").addClass("active").text(t.message);alert(t.message)}}makeFieldsEditable(e){const t=e.find(".btn--edit-note"),a=e.find(".btn--cancel-edit");e.find(".note-title-field, .note-body-field").removeAttr("readonly").addClass("note-active-field"),t.toggleClass("btn--edit-note--hidden").attr("aria-hidden","true"),a.toggleClass("btn--cancel-edit--hidden").removeAttr("aria-hidden"),e.find(".btn--update-note").addClass("btn--update-note--visible")}makeFieldsReadonly(e){const t=e.find(".btn--edit-note"),a=e.find(".btn--cancel-edit");e.find(".note-title-field, .note-body-field").attr("readonly","true").removeClass("note-active-field"),a.toggleClass("btn--cancel-edit--hidden").attr("aria-hidden","true"),t.toggleClass("btn--edit-note--hidden").removeAttr("aria-hidden"),e.find(".btn--update-note").removeClass("btn--update-note--visible")}},new class{constructor(){this.setupEvents()}setupEvents(){r()(".like-box").on("click",this.toggleLike.bind(this))}async toggleLike(e){const t=r()(e.currentTarget),a=Number(t.data("professor-id")),n=String(t.data("exists"));try{t.attr("data-exists","yes"===n?"no":"yes");const e=await r().ajax({url:`${cetaceanUniversityData.root_url}/wp-json/university/v1/like/${a}`,type:"POST",headers:{"X-WP-Nonce":cetaceanUniversityData.nonce}});"added"===e.like&&t.attr("data-exists","yes"),"removed"===e.like&&t.attr("data-exists","no"),t.find(".like-count").text(e.professor_likes_count)}catch(e){if(t.attr("data-exists",n),!("readyState"in e))return void console.log(e);const a=e.responseJSON;if("rest_forbidden"===a.code)return void(window.location.href=`${cetaceanUniversityData.root_url}/wp-login.php`);if("rest_cookie_invalid_nonce"===a.code)return void window.location.reload();alert(a.message)}}}},6087:e=>{e.exports=window.lodash}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,s,r)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,s,r]=e[c],i=!0,d=0;d<a.length;d++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[d])))?a.splice(d--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,s,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=3057,(()=>{var e={3057:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,r,[o,i,d]=a,l=0;if(o.some((t=>0!==e[t]))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(d)var c=d(n)}for(t&&t(a);l<o.length;l++)r=o[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=globalThis.webpackChunkcetacean_university_block_json_theme=globalThis.webpackChunkcetacean_university_block_json_theme||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[8096],(()=>n(3492)));s=n.O(s)})();